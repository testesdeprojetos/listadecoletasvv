<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lista de Coletas</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background-color: var(--bg-color); color: var(--text-color); transition: background 0.3s, color 0.3s; }
  :root {
    --bg-color: #f4f4f4;
    --text-color: #000;
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --bg-color: #121212;
      --text-color: #fff;
    }
  }
  .team { margin-bottom: 20px; border: 1px solid #ccc; background: #fff; padding: 15px; border-radius: 8px; }
  .empresa { margin-left: 20px; margin-top: 10px; }
  button { padding: 10px 15px; margin: 5px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
  button:hover { background-color: #0056b3; }
  textarea { width: 100%; height: 200px; margin-top: 10px; padding: 10px; border-radius: 8px; }
  .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); justify-content: center; align-items: center; animation: fadeIn 0.3s forwards; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .modal-content { background: white; padding: 20px; border-radius: 8px; width: 90%; max-width: 400px; animation: slideIn 0.3s forwards; }
  @keyframes slideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  .close { float: right; font-size: 24px; cursor: pointer; }
  input[type=text], select { width: 100%; padding: 8px; margin-top: 5px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px; }
</style>
</head>
<body>

<h1>Lista de Coletas</h1>

<div>
  <button onclick="openModal('teamModal')">Adicionar Equipe</button>
  <button onclick="openModal('empresaModal')">Adicionar Empresa</button>
  <button onclick="generateList()">Gerar Lista</button>
</div>

<div id="teams"></div>

<textarea id="output" placeholder="Aqui aparecerá a lista gerada..."></textarea>

<!-- Modal para adicionar equipe -->
<div id="teamModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('teamModal')">&times;</span>
    <h3>Adicionar Equipe</h3>
    <select id="motorista"></select>
    <div id="ajudantes"></div>
    <button onclick="openModal('gerenciarModal')">Gerenciar Motoristas/Ajudantes</button>
    <button onclick="addTeam()">Salvar Equipe</button>
  </div>
</div>

<!-- Modal para adicionar empresa -->
<div id="empresaModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('empresaModal')">&times;</span>
    <h3>Adicionar Empresa</h3>
    <select id="teamSelect"></select>
    <input type="text" id="nomeEmpresa" placeholder="Nome da Empresa">
    <input type="text" id="volumes" placeholder="Quantidade de Volumes">
    <input type="text" id="peso" placeholder="Peso (KG)">
    <input type="text" id="observacao" placeholder="Observação (opcional)">
    <button onclick="saveEmpresa()">Salvar Empresa</button>
  </div>
</div>

<!-- Modal para gerenciar motoristas e ajudantes -->
<div id="gerenciarModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('gerenciarModal')">&times;</span>
    <h3>Gerenciar Motoristas e Ajudantes</h3>
    <h4>Motoristas</h4>
    <ul id="listaMotoristas"></ul>
    <input type="text" id="novoMotorista" placeholder="Novo Motorista">
    <button onclick="addMotorista()">Adicionar Motorista</button>
    <h4>Ajudantes</h4>
    <ul id="listaAjudantes"></ul>
    <input type="text" id="novoAjudante" placeholder="Novo Ajudante">
    <button onclick="addAjudante()">Adicionar Ajudante</button>
  </div>
</div>

<script>
let teams = JSON.parse(localStorage.getItem('teams')) || [];
let motoristas = JSON.parse(localStorage.getItem('motoristas')) || ['Edvaldo', 'Josinaldo', 'Wilson', 'Filipe'];
let ajudantes = JSON.parse(localStorage.getItem('ajudantes')) || ['Roberto', 'Júlio', 'Weslley', 'Gustavo', 'André'];

// ... (restante do código igual, mantendo todas as funções)

function saveEmpresa() {
  const index = document.getElementById('teamSelect').value;
  const nome = document.getElementById('nomeEmpresa').value.trim();
  const volumes = document.getElementById('volumes').value.trim();
  const peso = document.getElementById('peso').value.trim();
  const obs = document.getElementById('observacao').value.trim();

  if (nome === '') { alert('Nome da empresa é obrigatório!'); return; }

  teams[index].empresas.push({ nome, volumes, peso, obs });

  localStorage.setItem('teams', JSON.stringify(teams));

  document.getElementById('nomeEmpresa').value = '';
  document.getElementById('volumes').value = '';
  document.getElementById('peso').value = '';
  document.getElementById('observacao').value = '';
  document.getElementById('nomeEmpresa').focus();
  renderTeams();
}

function generateList() {
  const output = document.getElementById('output');
  const today = new Date();
  const dateStr = today.toLocaleDateString('pt-BR');

  let text = `COLETAS DO DIA ${dateStr.toUpperCase()} ATUALIZADAS:\n\n`;

  teams.forEach(team => {
    text += `${team.motoristas.toUpperCase()} - ${team.ajudantes.toUpperCase()}\n\n`;
    team.empresas.forEach(emp => {
      let volText = emp.volumes ? ` ${emp.volumes.toUpperCase()} VOL` : '';
      let pesoText = emp.peso ? ` ${emp.peso.toUpperCase()} KG` : '';
      let obsText = emp.obs ? ` (${emp.obs.toUpperCase()})` : '';
      text += `- ${emp.nome.toUpperCase()}${volText}${pesoText}${obsText}\n`;
    });
    text += `\n`;
  });

  output.value = text;
}

</script>

</body>
</html>
